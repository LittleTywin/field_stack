wait_for_db refactoring

data request clientside